[tox]
requires = virtualenv<20.22.0
envlist = flake8,py27,py34,py35,py36,py37,py38,py39,py310,py311,py312

[testenv:flake8]
deps = flake8
commands = flake8 {toxinidir}/pganonymize {toxinidir}/tests

[testenv]
setenv =
    PYTHONPATH = {toxinidir}
deps =
    # faker
    py27: faker<4
    # parmap
    py{27,34}: parmap==1.5.2
    # psycopg2
    py27: psycopg2-binary==2.8.4
    # PyYAML
    py27: pyyaml<6
    py34: pyyaml<5.3
    # pytest
    py27: attrs<19.2
    py27: more-itertools<8.11
    # Common requirements
    -r{toxinidir}/requirements-tox.txt
commands =
    py.test --basetemp={envtmpdir} {posargs}
passenv =
    TOXENV
    GITHUB_*
